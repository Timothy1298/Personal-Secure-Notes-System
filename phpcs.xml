<?xml version="1.0"?>
<ruleset name="Personal Notes System">
    <description>Coding standard for Personal Notes System</description>
    
    <!-- Include the whole project -->
    <file>app</file>
    <file>core</file>
    <file>tests</file>
    
    <!-- Exclude paths -->
    <exclude-pattern>vendor</exclude-pattern>
    <exclude-pattern>database</exclude-pattern>
    <exclude-pattern>docker</exclude-pattern>
    <exclude-pattern>mobile</exclude-pattern>
    <exclude-pattern>desktop</exclude-pattern>
    <exclude-pattern>public</exclude-pattern>
    <exclude-pattern>storage</exclude-pattern>
    <exclude-pattern>exports</exclude-pattern>
    <exclude-pattern>imports</exclude-pattern>
    <exclude-pattern>backups</exclude-pattern>
    <exclude-pattern>uploads</exclude-pattern>
    
    <!-- Use PSR-12 standard -->
    <rule ref="PSR12"/>
    
    <!-- Additional rules -->
    <rule ref="Generic.Commenting.DocComment"/>
    <rule ref="Generic.Commenting.Todo"/>
    <rule ref="Generic.ControlStructures.InlineControlStructure"/>
    <rule ref="Generic.Files.LineEndings"/>
    <rule ref="Generic.Files.LineLength">
        <properties>
            <property name="lineLimit" value="120"/>
            <property name="absoluteLineLimit" value="140"/>
        </properties>
    </rule>
    <rule ref="Generic.NamingConventions.UpperCaseConstantName"/>
    <rule ref="Generic.PHP.DisallowShortOpenTag"/>
    <rule ref="Generic.PHP.LowerCaseConstant"/>
    <rule ref="Generic.PHP.LowerCaseKeyword"/>
    <rule ref="Generic.Strings.UnnecessaryStringConcat"/>
    <rule ref="Squiz.Commenting.FunctionComment"/>
    <rule ref="Squiz.Commenting.VariableComment"/>
    <rule ref="Squiz.PHP.DisallowMultipleAssignments"/>
    <rule ref="Squiz.PHP.DisallowObEndFlush"/>
    <rule ref="Squiz.PHP.Eval"/>
    <rule ref="Squiz.PHP.GlobalKeyword"/>
    <rule ref="Squiz.PHP.NonExecutableCode"/>
    <rule ref="Squiz.Scope.MemberVarScope"/>
    <rule ref="Squiz.Scope.MethodScope"/>
    <rule ref="Squiz.Scope.StaticThisUsage"/>
    <rule ref="Squiz.WhiteSpace.ScopeClosingBrace"/>
    <rule ref="Squiz.WhiteSpace.ScopeIndent"/>
    <rule ref="Squiz.WhiteSpace.ScopeKeywordSpacing"/>
    <rule ref="Squiz.WhiteSpace.SuperfluousWhitespace"/>
    <rule ref="Zend.Files.ClosingTag"/>
    <rule ref="Zend.NamingConventions.ValidVariableName"/>
    
    <!-- Custom rules -->
    <rule ref="Generic.Commenting.DocComment.MissingShort">
        <severity>5</severity>
    </rule>
    <rule ref="Generic.Commenting.DocComment.MissingParamComment">
        <severity>5</severity>
    </rule>
    <rule ref="Generic.Commenting.DocComment.MissingReturn">
        <severity>5</severity>
    </rule>
    
    <!-- Ignore specific rules for certain files -->
    <rule ref="PSR1.Files.SideEffects">
        <exclude-pattern>public/index.php</exclude-pattern>
        <exclude-pattern>worker.php</exclude-pattern>
    </rule>
</ruleset>
